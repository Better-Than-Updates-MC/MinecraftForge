diff -u -r --strip-trailing-cr ../src_base/minecraft/net/minecraft/src/ChunkProviderGenerate.java ../src_work/minecraft/net/minecraft/src/ChunkProviderGenerate.java
--- ../src_base/minecraft/net/minecraft/src/ChunkProviderGenerate.java	2011-07-11 21:58:45.029673700 +0200
+++ ../src_work/minecraft/net/minecraft/src/ChunkProviderGenerate.java	2011-07-15 21:55:40.634969900 +0200
@@ -6,6 +6,8 @@
 
 import java.util.Random;
 
+import net.minecraft.src.forge.MinecraftForge;
+
 // Referenced classes of package net.minecraft.src:
 //            IChunkProvider, MapGenCaves, NoiseGeneratorOctaves, Block, 
 //            BiomeGenBase, Chunk, World, WorldChunkManager, 
@@ -632,6 +634,8 @@
             int i25 = l + rand.nextInt(16) + 8;
             (new WorldGenLiquids(Block.lavaMoving.blockID)).generate(worldObj, rand, i22, l23, i25);
         }
+        
+        MinecraftForge.populateBiome(worldObj, biomegenbase, k, l);
 
         generatedTemperatures = worldObj.getWorldChunkManager().getTemperatures(generatedTemperatures, k + 8, l + 8, 16, 16);
         for(int j19 = k + 8; j19 < k + 8 + 16; j19++)
diff -u -r --strip-trailing-cr ../src_base/minecraft/net/minecraft/src/ItemBucket.java ../src_work/minecraft/net/minecraft/src/ItemBucket.java
--- ../src_base/minecraft/net/minecraft/src/ItemBucket.java	2011-07-11 21:58:45.174682000 +0200
+++ ../src_work/minecraft/net/minecraft/src/ItemBucket.java	2011-07-15 23:13:30.143050500 +0200
@@ -6,6 +6,8 @@
 
 import java.util.Random;
 
+import net.minecraft.src.forge.MinecraftForge;
+
 // Referenced classes of package net.minecraft.src:
 //            Item, EntityPlayer, Vec3D, MathHelper, 
 //            World, MovingObjectPosition, EnumMovingObjectType, Material, 
@@ -55,6 +57,13 @@
             }
             if(isFull == 0)
             {
+                ItemStack customBucket = MinecraftForge.fillCustomBucket(world,
+                        i, j, k);
+            	
+                if (customBucket != null) {
+                   return customBucket;
+                }
+
                 if(world.getBlockMaterial(i, j, k) == Material.water && world.getBlockMetadata(i, j, k) == 0)
                 {
                     world.setBlockWithNotify(i, j, k, 0);
diff -u -r --strip-trailing-cr ../src_base/minecraft/net/minecraft/src/RenderBlocks.java ../src_work/minecraft/net/minecraft/src/RenderBlocks.java
--- ../src_base/minecraft/net/minecraft/src/RenderBlocks.java	2011-07-11 21:58:45.359692600 +0200
+++ ../src_work/minecraft/net/minecraft/src/RenderBlocks.java	2011-07-16 00:35:25.293181000 +0200
@@ -5,6 +5,8 @@
 package net.minecraft.src;
 
 import net.minecraft.client.Minecraft;
+import net.minecraft.src.forge.MinecraftForgeClient;
+
 import org.lwjgl.opengl.GL11;
 
 // Referenced classes of package net.minecraft.src:
@@ -3485,6 +3487,7 @@
 
     public void renderBlockOnInventory(Block block, int i, float f)
     {
+        MinecraftForgeClient.beforeBlockRenderInventory(block);
         Tessellator tessellator = Tessellator.instance;
         if(field_31088_b)
         {
@@ -3685,6 +3688,8 @@
         {
             ModLoader.RenderInvBlock(this, block, i, k);
         }
+        
+        MinecraftForgeClient.afterBlockRenderInventory(block);
     }
 
     public static boolean renderItemIn3d(int i)
diff -u -r --strip-trailing-cr ../src_base/minecraft/net/minecraft/src/WorldRenderer.java ../src_work/minecraft/net/minecraft/src/WorldRenderer.java
--- ../src_base/minecraft/net/minecraft/src/WorldRenderer.java	2011-07-11 21:58:45.464698600 +0200
+++ ../src_work/minecraft/net/minecraft/src/WorldRenderer.java	2011-07-16 00:27:38.378475000 +0200
@@ -5,6 +5,9 @@
 package net.minecraft.src;
 
 import java.util.*;
+
+import net.minecraft.src.forge.MinecraftForgeClient;
+
 import org.lwjgl.opengl.GL11;
 
 // Referenced classes of package net.minecraft.src:
@@ -144,8 +147,10 @@
                             continue;
                         }
                         if(j3 == i2)
-                        {
+                        {                        	                            
+                        	MinecraftForgeClient.beforeBlockRender(block, renderblocks);
                             flag1 |= renderblocks.renderBlockByRenderType(block, l2, j2, k2);
+                            MinecraftForgeClient.afterBlockRender(block, renderblocks);                           
                         }
                     }
 
diff -u -r --strip-trailing-cr ../src_base/minecraft_server/net/minecraft/server/MinecraftServer.java ../src_work/minecraft_server/net/minecraft/server/MinecraftServer.java
--- ../src_base/minecraft_server/net/minecraft/server/MinecraftServer.java	2011-07-11 21:58:45.468698800 +0200
+++ ../src_work/minecraft_server/net/minecraft/server/MinecraftServer.java	2011-07-11 22:00:55.619143000 +0200
@@ -333,41 +333,22 @@
             }
             finally
             {
-                System.exit(0);
+                    try
+                    {
+                            stopServer();
+                            serverStopped = true;
+                    }
+                    catch(Throwable throwable2)
+                    {
+                            throwable2.printStackTrace();
+                    }
+                    finally
+                    {
+                            System.exit(0);
+                    }
             }
-            break MISSING_BLOCK_LABEL_350;
-        }
-        try
-        {
-            stopServer();
-            serverStopped = true;
-        }
-        catch(Throwable throwable)
-        {
-            throwable.printStackTrace();
-        }
-        finally
-        {
-            System.exit(0);
-        }
-        break MISSING_BLOCK_LABEL_350;
-        Exception exception2;
-        exception2;
-        try
-        {
-            stopServer();
-            serverStopped = true;
-        }
-        catch(Throwable throwable3)
-        {
-            throwable3.printStackTrace();
-        }
-        finally
-        {
-            System.exit(0);
-        }
-        throw exception2;
     }
+}
 
     private void doTick()
     {
diff -u -r --strip-trailing-cr ../src_base/minecraft_server/net/minecraft/src/ChunkProviderGenerate.java ../src_work/minecraft_server/net/minecraft/src/ChunkProviderGenerate.java
--- ../src_base/minecraft_server/net/minecraft/src/ChunkProviderGenerate.java	2011-07-11 21:58:45.652709400 +0200
+++ ../src_work/minecraft_server/net/minecraft/src/ChunkProviderGenerate.java	2011-07-15 23:09:16.449540100 +0200
@@ -6,6 +6,8 @@
 
 import java.util.Random;
 
+import net.minecraft.src.forge.MinecraftForge;
+
 // Referenced classes of package net.minecraft.src:
 //            IChunkProvider, MapGenCaves, NoiseGeneratorOctaves, Block, 
 //            BiomeGenBase, Chunk, World, WorldChunkManager, 
@@ -632,6 +634,8 @@
             int i25 = l + rand.nextInt(16) + 8;
             (new WorldGenLiquids(Block.lavaMoving.blockID)).generate(worldObj, rand, i22, l23, i25);
         }
+        
+        MinecraftForge.populateBiome(worldObj, biomegenbase, k, l);
 
         generatedTemperatures = worldObj.getWorldChunkManager().getTemperatures(generatedTemperatures, k + 8, l + 8, 16, 16);
         for(int j19 = k + 8; j19 < k + 8 + 16; j19++)
diff -u -r --strip-trailing-cr ../src_base/minecraft_server/net/minecraft/src/ItemBucket.java ../src_work/minecraft_server/net/minecraft/src/ItemBucket.java
--- ../src_base/minecraft_server/net/minecraft/src/ItemBucket.java	2011-07-11 21:58:45.765715800 +0200
+++ ../src_work/minecraft_server/net/minecraft/src/ItemBucket.java	2011-07-15 23:15:07.301607700 +0200
@@ -6,6 +6,8 @@
 
 import java.util.Random;
 
+import net.minecraft.src.forge.MinecraftForge;
+
 // Referenced classes of package net.minecraft.src:
 //            Item, EntityPlayer, Vec3D, MathHelper, 
 //            World, MovingObjectPosition, EnumMovingObjectType, Material, 
@@ -55,6 +57,13 @@
             }
             if(isFull == 0)
             {
+                ItemStack customBucket = MinecraftForge.fillCustomBucket(world,
+                        i, j, k);
+            	
+            	if (customBucket != null) {
+            		return customBucket;
+            	}
+
                 if(world.getBlockMaterial(i, j, k) == Material.water && world.getBlockMetadata(i, j, k) == 0)
                 {
                     world.setBlockWithNotify(i, j, k, 0);
