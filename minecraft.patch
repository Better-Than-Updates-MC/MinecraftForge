diff -u -r --strip-trailing-cr ../src_base/minecraft/net/minecraft/src/ItemBucket.java ../src_work/minecraft/net/minecraft/src/ItemBucket.java
--- ../src_base/minecraft/net/minecraft/src/ItemBucket.java	2011-07-11 21:58:45.174682000 +0200
+++ ../src_work/minecraft/net/minecraft/src/ItemBucket.java	2011-07-14 13:03:34.748396700 +0200
@@ -6,6 +6,8 @@
 
 import java.util.Random;
 
+import net.minecraft.src.forge.MinecraftForge;
+
 // Referenced classes of package net.minecraft.src:
 //            Item, EntityPlayer, Vec3D, MathHelper, 
 //            World, MovingObjectPosition, EnumMovingObjectType, Material, 
@@ -55,6 +57,13 @@
             }
             if(isFull == 0)
             {
+				ItemStack customBucket = MinecraftForge.fillCustomBucket(world,
+						i, j, k);
+            	
+            	if (customBucket != null) {
+            		return customBucket;
+            	}
+
                 if(world.getBlockMaterial(i, j, k) == Material.water && world.getBlockMetadata(i, j, k) == 0)
                 {
                     world.setBlockWithNotify(i, j, k, 0);
diff -u -r --strip-trailing-cr ../src_base/minecraft_server/net/minecraft/server/MinecraftServer.java ../src_work/minecraft_server/net/minecraft/server/MinecraftServer.java
--- ../src_base/minecraft_server/net/minecraft/server/MinecraftServer.java	2011-07-11 21:58:45.468698800 +0200
+++ ../src_work/minecraft_server/net/minecraft/server/MinecraftServer.java	2011-07-11 22:00:55.619143000 +0200
@@ -333,41 +333,22 @@
             }
             finally
             {
-                System.exit(0);
+                    try
+                    {
+                            stopServer();
+                            serverStopped = true;
+                    }
+                    catch(Throwable throwable2)
+                    {
+                            throwable2.printStackTrace();
+                    }
+                    finally
+                    {
+                            System.exit(0);
+                    }
             }
-            break MISSING_BLOCK_LABEL_350;
-        }
-        try
-        {
-            stopServer();
-            serverStopped = true;
-        }
-        catch(Throwable throwable)
-        {
-            throwable.printStackTrace();
-        }
-        finally
-        {
-            System.exit(0);
-        }
-        break MISSING_BLOCK_LABEL_350;
-        Exception exception2;
-        exception2;
-        try
-        {
-            stopServer();
-            serverStopped = true;
-        }
-        catch(Throwable throwable3)
-        {
-            throwable3.printStackTrace();
-        }
-        finally
-        {
-            System.exit(0);
-        }
-        throw exception2;
     }
+}
 
     private void doTick()
     {
diff -u -r --strip-trailing-cr ../src_base/minecraft_server/net/minecraft/src/ItemBucket.java ../src_work/minecraft_server/net/minecraft/src/ItemBucket.java
--- ../src_base/minecraft_server/net/minecraft/src/ItemBucket.java	2011-07-11 21:58:45.765715800 +0200
+++ ../src_work/minecraft_server/net/minecraft/src/ItemBucket.java	2011-07-14 13:03:49.701251900 +0200
@@ -6,6 +6,8 @@
 
 import java.util.Random;
 
+import net.minecraft.src.forge.MinecraftForge;
+
 // Referenced classes of package net.minecraft.src:
 //            Item, EntityPlayer, Vec3D, MathHelper, 
 //            World, MovingObjectPosition, EnumMovingObjectType, Material, 
@@ -55,6 +57,13 @@
             }
             if(isFull == 0)
             {
+				ItemStack customBucket = MinecraftForge.fillCustomBucket(world,
+						i, j, k);
+            	
+            	if (customBucket != null) {
+            		return customBucket;
+            	}
+
                 if(world.getBlockMaterial(i, j, k) == Material.water && world.getBlockMetadata(i, j, k) == 0)
                 {
                     world.setBlockWithNotify(i, j, k, 0);
